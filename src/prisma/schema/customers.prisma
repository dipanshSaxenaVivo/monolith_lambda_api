enum currency {
  INR
  USD
}

enum companyType {
  DEMO
  PERMENANT
  SUPENDED
}

model framework {
  id              String @id @default(auto()) @map("_id") @db.ObjectId
  name            String
  description     String
  regulatory_body String
  url             String

  @@index([name])
}

model criteria {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  framework_id String @db.ObjectId // framework::_id. can not change once created.
  code         String
  description  String

  @@index([framework_id])

  @@unique([code,framework_id])
}

model control {
  id          String  @id @default(auto()) @map("_id") @db.ObjectId
  name        String?
  code        String
  description String
  domain      String // Departments: IT, HR and Operations etc.
  is_custom   Boolean
  customer_id String  @db.ObjectId // customer::_id when is_custom is true.

  @@index([name])
  @@index([description])
  @@index([customer_id])

  @@unique([code])
}

model framework_criteria_control_mapping {
  id           String   @id @default(auto()) @map("_id") @db.ObjectId
  framework_id String   @db.ObjectId // framework::_id.
  criteria_ids String[] @db.ObjectId // criteria::_id.
  control_id   String   @db.ObjectId // control::_id.
  is_custom    Boolean
  customer_id  String   @db.ObjectId // customer::_id when is_custom is true.

  @@index([framework_id])
  @@index([is_custom])
  @@index([customer_id])

  @@unique([framework_id,control_id])
}

model customers {
  id           String      @id @default(auto()) @map("_id") @db.ObjectId
  email        String      @default("meEmail@gmail.com")
  customerName String      @default("meEmail")
  phoneNumber  Int         @default(1234567)
  description  String?
  endDate      DateTime    @default(now()) @db.Timestamp
  currency     currency    @default(INR)
  companyType  companyType @default(DEMO)

  @@index(name:"myIndex",[phoneNumber])

  @@unique(name:"myUnique",[email, phoneNumber])
}